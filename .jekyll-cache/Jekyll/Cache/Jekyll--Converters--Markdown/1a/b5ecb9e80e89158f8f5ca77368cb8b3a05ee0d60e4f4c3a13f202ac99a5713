I"*n<p>這篇是 <a href="https://rhadow.github.io/2015/02/18/Jekyll-x-Github-x-Blog-Part1/">Jekyll x Github x Blog (Part1)</a> 的接續文章。在上一篇文章中，我大略的介紹了Jekyll 部落格的架構，這篇將主要探討如何在已建立的 Jekyll 部落格內加入一些簡易功能。</p>

<p><strong><em>注意：如果要使用文章內的程式碼內容，請將 <code class="language-plaintext highlighter-rouge">{.%</code> 與 <code class="language-plaintext highlighter-rouge">{.{</code> 中間的 <code class="language-plaintext highlighter-rouge">.</code> 去掉再用。</em></strong></p>

<h2 id="_configyml-基本設定">_config.yml 基本設定</h2>
<p><code class="language-plaintext highlighter-rouge">config.yml</code> 的檔案內容決定了 Jekyll 部落格內的所有設定，包括網址路徑，網站描述，markdown 的寫法等，以下是我的部落格的一些 <code class="language-plaintext highlighter-rouge">_config.yml</code> 內容：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Dependencies
markdown            : redcarpet
redcarpet:
  extensions        : ["tables", "autolink", "strikethrough", "space_after_headers", "with_toc_data", "fenced_code_blocks"]
highlighter         : pygments

# Permalinks
permalink           : pretty
</code></pre></div></div>

<p>Jekyll 支援多種不同的 markdown 語法例如 <code class="language-plaintext highlighter-rouge">kramdown</code> 、<code class="language-plaintext highlighter-rouge">redcarpet</code> 等。這些語法都各有優缺點，也有各自的設定方法，這部分可到 [Jekyll 官網的設定頁面] (http://jekyllrb.com/docs/configuration/) 查詢。這個部落格使用的是 <code class="language-plaintext highlighter-rouge">redcarpet</code>，最主要的原因在於它支援所謂的 <code class="language-plaintext highlighter-rouge">Github Flavored Markdown</code>。讓我們可以使用與 Github 相同的 markdown 寫法來寫部落格內容，其中的 <code class="language-plaintext highlighter-rouge">fenced_code_block</code> 更是能讓分享程式碼的過程更為簡易。 <code class="language-plaintext highlighter-rouge">fenced_code_block</code> 能夠依據你所提供的程式語言並使用 highlighter 自動幫程式碼做色彩的調整，分隔的寫法也使 markdown 檔案內容更易讀。以下是一些使用 <code class="language-plaintext highlighter-rouge">fenced_code_block</code> 寫法的例子：</p>

<p>Ruby:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```ruby
require 'redcarpet'
markdown = Redcarpet.new("Hello World!")
puts markdown.to_html
```
</code></pre></div></div>

<p>JavaScript:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```javascript
function fancyAlert(arg) {
  if(arg) {
    $.facebox({div:'#foo'})
  }
}
```
</code></pre></div></div>

<p>更詳細的說明可至 <a href="https://guides.github.com/features/mastering-markdown/">Github Markdown 說明頁</a> 閱讀，順帶一提，這個部落格使用的 highlighter 是 <a href="http://pygments.org/">pygments</a>。</p>

<p><code class="language-plaintext highlighter-rouge">Permalink</code> 影響著部落格文章網址的顯示方式，Jekyll 提供三種選擇：</p>

<table>
  <thead>
    <tr>
      <th>Permalink</th>
      <th>URL 樣式</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>date</td>
      <td>/:categories/:year/:month/:day/:title.html</td>
    </tr>
    <tr>
      <td>pretty</td>
      <td>/:categories/:year/:month/:day/:title/</td>
    </tr>
    <tr>
      <td>none</td>
      <td>/:categories/:title.html</td>
    </tr>
  </tbody>
</table>

<p><code class="language-plaintext highlighter-rouge">Permalink</code> 這部分其實比較偏個人喜好去做設定的。
剩餘的一些設定算是相當直觀，比較需要注意的是，所有在 <code class="language-plaintext highlighter-rouge">_config.yml</code> 內部的屬性都能夠在其他使用 liquid template 的頁面以 <code class="language-plaintext highlighter-rouge">site.屬性名稱</code> 的方式來取得值。這部分可用來連結至你個人的社群網站如 Facebook 或 Github。</p>

<h2 id="加入討論串功能">加入討論串功能</h2>
<p>在文章中加入討論串功能其實相當容易，我們將會使用 <a href="https://disqus.com/">Disqus</a> 做為討論串的平台。首先第一步是創建一個 Disqus 帳號並連結至我們的部落格，Disqus 會提供一段專屬的程式碼讓你加入到網站中。加入的方法也很簡單，在 <code class="language-plaintext highlighter-rouge">_layouts/default.html </code> 的檔案中加入</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{.</span><span class="o">%</span> <span class="nx">include</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">html</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div></div>

<p>接著新建一個 <code class="language-plaintext highlighter-rouge">comments.html</code> 檔案到 <code class="language-plaintext highlighter-rouge">_include</code> 資料夾中並將 Disqus 提供的程式碼貼上：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{.% if page.comments %}
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"disqus_thread"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="cm">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */</span>
    <span class="kd">var</span> <span class="nx">disqus_shortname</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">rhadowtechnote</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// required: replace example with your forum shortname</span>
    <span class="kd">var</span> <span class="nx">disqus_identifier</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">{.{ page.url }}</span><span class="dl">'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">disqus_url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://rhadow.github.com{.{ page.url }}</span><span class="dl">'</span><span class="p">;</span>

    <span class="cm">/* * * DON'T EDIT BELOW THIS LINE * * */</span>
    <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dsq</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">dsq</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">text/javascript</span><span class="dl">'</span><span class="p">;</span>
        <span class="nx">dsq</span><span class="p">.</span><span class="k">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">dsq</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">//</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">disqus_shortname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">.disqus.com/embed.js</span><span class="dl">'</span><span class="p">;</span>
        <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">head</span><span class="dl">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">dsq</span><span class="p">);</span>
    <span class="p">})();</span>
    <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;noscript&gt;</span>Please enable JavaScript to view the <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://disqus.com/?ref_noscript"</span><span class="nt">&gt;</span>comments powered by Disqus.<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/noscript&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://disqus.com"</span> <span class="na">class=</span><span class="s">"dsq-brlink"</span><span class="nt">&gt;</span>comments powered by <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"logo-disqus"</span><span class="nt">&gt;</span>Disqus<span class="nt">&lt;/span&gt;&lt;/a&gt;</span>
{.% endif %}
</code></pre></div></div>

<p>我在上面的程式碼中加入了 <code class="language-plaintext highlighter-rouge">{.% if page.comments %}</code> ，這樣的設計可以讓使用者決定哪些文章可以開放討論，你只需要在文章的 header 設定中加入 “comments: True” 就能啟用討論串功能了。</p>

<h2 id="加入標籤功能">加入標籤功能</h2>
<p>實作標籤功能算是比較複雜的，網路上有許多使用其他外掛的方法來製作標籤功能，但在 Github Host 的網頁是無法執行這些外掛的。於是我在<a href="http://erjjones.github.io/blog/Part-two-how-I-built-my-blog/">網路</a>上找到另一種方法，在這邊分享給大家。首先先新建兩個檔案：</p>

<ul>
  <li>在 <code class="language-plaintext highlighter-rouge">_plugins</code> 資料夾 (如果沒有請自己建) 中新建 <code class="language-plaintext highlighter-rouge">tag_gen.rb</code></li>
  <li>在 <code class="language-plaintext highlighter-rouge">_layouts</code> 資料夾中新建 <code class="language-plaintext highlighter-rouge">tag_index.html</code></li>
</ul>

<p><code class="language-plaintext highlighter-rouge">tag_gen.rb</code> 的程式碼如下，它的主要功能是將部落格中的文章依照標籤做出獨立的標籤分頁。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Jekyll</span>

  <span class="k">class</span> <span class="nc">TagIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>    
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
      <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
      <span class="vi">@dir</span> <span class="o">=</span> <span class="n">dir</span>
      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">'index.html'</span>

      <span class="nb">self</span><span class="p">.</span><span class="nf">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
      <span class="nb">self</span><span class="p">.</span><span class="nf">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">'_layouts'</span><span class="p">),</span> <span class="s1">'tag_index.html'</span><span class="p">)</span>
      <span class="nb">self</span><span class="p">.</span><span class="nf">data</span><span class="p">[</span><span class="s1">'tag'</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag</span>
      <span class="nb">self</span><span class="p">.</span><span class="nf">data</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Posts Tagged &amp;ldquo;"</span><span class="o">+</span><span class="n">tag</span><span class="o">+</span><span class="s2">"&amp;rdquo;"</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">TagGenerator</span> <span class="o">&lt;</span> <span class="no">Generator</span>
    <span class="n">safe</span> <span class="kp">true</span>

    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">site</span><span class="p">.</span><span class="nf">layouts</span><span class="p">.</span><span class="nf">key?</span> <span class="s1">'tag_index'</span>
        <span class="n">dir</span> <span class="o">=</span> <span class="s1">'tags'</span>
        <span class="n">site</span><span class="p">.</span><span class="nf">tags</span><span class="p">.</span><span class="nf">keys</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
          <span class="n">write_tag_index</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">),</span> <span class="n">tag</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">write_tag_index</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
      <span class="n">index</span> <span class="o">=</span> <span class="no">TagIndex</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">site</span><span class="p">.</span><span class="nf">source</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
      <span class="n">index</span><span class="p">.</span><span class="nf">render</span><span class="p">(</span><span class="n">site</span><span class="p">.</span><span class="nf">layouts</span><span class="p">,</span> <span class="n">site</span><span class="p">.</span><span class="nf">site_payload</span><span class="p">)</span>
      <span class="n">index</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">site</span><span class="p">.</span><span class="nf">dest</span><span class="p">)</span>
      <span class="n">site</span><span class="p">.</span><span class="nf">pages</span> <span class="o">&lt;&lt;</span> <span class="n">index</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">tag_index.html</code> 則是每個標籤分頁的骨架：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"tag-summary-title"</span><span class="nt">&gt;</span>{.{page.title}}<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table table-striped tag-summary"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tbody&gt;</span>
	{.% for post in site.posts %}
	{.% for tag in post.tags %}
	{.% if tag == page.tag %}
	<span class="nt">&lt;tr&gt;</span>
	    <span class="nt">&lt;td&gt;</span>
		    <span class="nt">&lt;h3&gt;</span>
		        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{.{ post.url }}"</span><span class="nt">&gt;</span>
		            {.{ post.title }}
		            <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">"subtitle"</span><span class="nt">&gt;</span>
		                <span class="nt">&lt;span&gt;</span>{.{ post.subtitle }}<span class="nt">&lt;/span&gt;</span>
		            <span class="nt">&lt;/small&gt;</span>
		        <span class="nt">&lt;/a&gt;</span>
		    <span class="nt">&lt;/h3&gt;</span>
			<span class="nt">&lt;p&gt;</span>
				<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"post-date"</span><span class="nt">&gt;</span>Posted by {.{ post.author }} on {.{ post.date | date: "%B %-d, %Y" }}<span class="nt">&lt;/span&gt;</span>
				<span class="nt">&lt;small&gt;</span>
				    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"fa-stack fa-sm"</span><span class="nt">&gt;</span>
		                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-tags fa-stack-1x"</span><span class="nt">&gt;&lt;/i&gt;</span>
		            <span class="nt">&lt;/span&gt;</span> :
		            {.% for tag in post.tags %} <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"tag-wrapper"</span> <span class="na">href=</span><span class="s">"/tags/{.{ tag }}"</span> <span class="na">title=</span><span class="s">"View posts tagged with &amp;quot;{.{ tag }}&amp;quot;"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"tags"</span><span class="nt">&gt;</span>{.{ tag }}<span class="nt">&lt;/i&gt;&lt;/a&gt;</span>  {.% if forloop.last != true %} {.% endif %} {.% endfor %}
		        <span class="nt">&lt;/small&gt;</span>
		        <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">"comment-count"</span><span class="nt">&gt;</span>
			        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"fa-stack fa-sm"</span><span class="nt">&gt;</span>
			            <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-comments fa-stack-1x"</span><span class="nt">&gt;&lt;/i&gt;</span>
			        <span class="nt">&lt;/span&gt;</span>
			        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://rhadow.github.com{.{ post.url }}#disqus_thread"</span> <span class="na">data-disqus-identifier=</span><span class="s">"{.{ post.url }}"</span><span class="nt">&gt;&lt;/a&gt;</span>
			    <span class="nt">&lt;/small&gt;</span>
	        <span class="nt">&lt;/p&gt;</span>
	    <span class="nt">&lt;/td&gt;</span>
	<span class="nt">&lt;/tr&gt;</span>
	{.% endif %}
	{.% endfor %}
	{.% endfor %}			
  <span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<p>在使用 <code class="language-plaintext highlighter-rouge">jekyll build</code> 和 <code class="language-plaintext highlighter-rouge">jekyll serve</code> 後，<code class="language-plaintext highlighter-rouge">tag_gen.rb</code> 會在 <code class="language-plaintext highlighter-rouge">_site</code> 的資料夾內產生一個叫做 <code class="language-plaintext highlighter-rouge">tags</code> 的資料夾。在 <code class="language-plaintext highlighter-rouge">tags</code> 資料夾內會有多個依照標籤命名的資料夾，裡面的內容則是已經經過標籤分類後的文章總覽靜態頁面。這方法雖然不使用其他的外掛，但每次有新的標籤時必須得在本地先跑一次 ‘jekyll serve’ 並把新產生的 <code class="language-plaintext highlighter-rouge">_site</code> 內的 <code class="language-plaintext highlighter-rouge">tags</code> 資料夾拉到根目錄取代原本的 <code class="language-plaintext highlighter-rouge">tags</code> 資料夾再 push，Github 才會抓到這些頁面。可以參考 <a href="https://github.com/Rhadow/Rhadow.github.io">我的專案頁面</a> 來深入了解。</p>

<h2 id="目錄頁與標籤雲">目錄頁與標籤雲</h2>
<p>目錄頁的製作其實只是利用 liquid template 的語法來將所有文章依照你喜歡的格式來做輸出，我的範例如下：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"archive"</span><span class="nt">&gt;</span>
  {.% for post in site.posts %}

    {.% unless post.next %}
      <span class="nt">&lt;h3&gt;</span>{.{ post.date | date: '%Y' }}<span class="nt">&lt;/h3&gt;</span>
    {.% else %}
      {.% capture year %}{.{ post.date | date: '%Y' }}{.% endcapture %}
      {.% capture nyear %}{.{ post.next.date | date: '%Y' }}{.% endcapture %}
      {.% if year != nyear %}
        <span class="nt">&lt;h3&gt;</span>{.{ post.date | date: '%Y' }}<span class="nt">&lt;/h3&gt;</span>
      {.% endif %}
    {.% endunless %}

    <span class="nt">&lt;li&gt;</span>    
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"month"</span><span class="nt">&gt;</span>{.{ post.date | date:"%b" }}<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"archive-post-title"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{.{ post.url }}"</span><span class="nt">&gt;</span>{.{ post.title }}<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  {.% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>

<p>標籤雲的部分也是相同道理：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"tag-cloud"</span><span class="nt">&gt;</span>
{.% assign sorted_tags = (site.tags | sort: 0) %}
{.% for tag in sorted_tags %}
  <span class="nt">&lt;li</span> <span class="na">style=</span><span class="s">"font-size: {.{ tag | last | size | times: 100 | divided_by: site.tags.size | plus: 35  }}%"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/tags/{.{ tag[0] }}"</span><span class="nt">&gt;</span>
      {.{ tag | first }} ({.{ tag | last | size }})
    <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/li&gt;</span>
{.% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>

<h2 id="google-分析">Google 分析</h2>
<p>最後一個要分享的就是加入 Google 分析功能。首先前往 <a href="http://www.google.com/analytics/">Google 分析</a> 並註冊。在註冊完成並成功連結你的網站後，Google 會提供一段追蹤程式碼給你：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script&gt;</span>
  <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">){</span><span class="nx">i</span><span class="p">[</span><span class="dl">'</span><span class="s1">GoogleAnalyticsObject</span><span class="dl">'</span><span class="p">]</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">||</span><span class="kd">function</span><span class="p">(){</span>
  <span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">||</span><span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)},</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">l</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span><span class="nx">a</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span>
  <span class="nx">m</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">o</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="nx">a</span><span class="p">.</span><span class="k">async</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span><span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
  <span class="p">})(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">//www.google-analytics.com/analytics.js</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">ga</span><span class="dl">'</span><span class="p">);</span>

  <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">create</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">UA-59285222-1</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">auto</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">send</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pageview</span><span class="dl">'</span><span class="p">);</span>

<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>接下來只需要將這段程式碼加入你頁面的 <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> 就完成囉。有關 Google 分析的詳細教學請參考 <a href="http://www.google.com.hk/analytics/learn/">這裡</a></p>

<h2 id="總結">總結</h2>
<p>其實部落格能夠有的功能非常多，這邊也只介紹了冰山一角而已。這篇除了分享給其他想自己做部落格的人之外也算是為自己曾做過的留下紀錄，以防未來忘記當初是如何製作的。完成以上分享的這些功能的方法有很多種，因此，如各位有其他更好的做法，也歡迎留言提供分享。</p>
:ET